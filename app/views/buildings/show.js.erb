<% if @messages.count > 0 %>
  messages = []
  <% @messages.each do |message| %>
    messages.push(('<%= j render "messages/message", message: message %>'))
  <% end %>
  $('.messages-container').prepend(messages)
  $('#messages-loader').detach().prependTo(".messages-container").hide()
  $(".infos-channel").detach().prependTo(".messages-container")
  $('#next-page').data('next-page', "<%= params[:page].to_i + 1 %>")
  initialMessageTop = $($('.message-wrapper')[20]).offset().top
  $(".scroll-container" ).scrollTop(initialMessageTop);
  app.buildings.show.initNewMessageModal()
<% else %>
$('#messages-loader').data('continue', false)
$('#messages-loader').hide()
<% end %>
