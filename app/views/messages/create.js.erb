$('textarea').focus();
mixpanel.track("Nouveau message", {
    "user_id": <%= @message.user.id %>,
    "Immeuble": <%= @message.user.building_id %>
});
// message = ('<%= j render(partial: "messages/message", locals: { message: @message } ).html_safe %>')
// $(".messages-container").append(message)
messageTop = $('.msg-container').last().offset().top
$('html, body').animate({scrollTop:messageTop}, 'slow');
$('#message_body').val("")
$('textarea').css('height', "40px")

publisher = client.publish('/messages', {
  message: '<%= j render @message %>'
});
publisher.callback(function() {
  $('#new_message').find("button[type='submit']").prop('disabled', false)
});
messageTop = $('.msg-container').last().offset().top
$('html, body').animate({scrollTop:messageTop}, 'slow');
